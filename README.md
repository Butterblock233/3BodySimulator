# 3BodySimulator

The visualization simulation of three-body motion implemented using C++ & Python.

## Dependencies

- C++ Compiler

- [Git](https://git-scm.com/): Version Control

- [CMake(*>= v3.22*)](https://cmake.org/documentation/): C++ Build Tool

- [vcpkg](https://learn.microsoft.com/zh-cn/vcpkg/): C++ Packages Manager

- [Python(*>= v3.12*)](https://www.python.org/): Visualization Part

- [uv](https://docs.astral.sh/uv/): Python Packages Manager

## Tech Stack in This Project

This part was almost all generated by **chatGPT** except for `CALLOUT` part. Use for my personal reference and study.

### Languages & Core Libraries

1. **C++ (Physics Engine)**

    - Standard: C++17

    - Algorithm: Euler integration (`step` function implements three‐body dynamics)

    - Data structures: `struct Body` (mass, position, velocity), `std::vector<Body>`

2. **Python (Scripting & Visualization Layer)**

    - Binding module: `three_body`, which build from C++

    - Key libraries:
        - `numpy` (numeric arrays & trajectory storage)

        - `matplotlib` (static plots & animations)

        - `pygame` (real‐time interactive window)

        - Standard modules: `json` (config file I/O), `sys`, `input()`

### Build & Dependency Management

1. **CMake**

    - Project files: root `CMakeLists.txt` + `src/CMakeLists.txt`

    - Configures C++ standard, vcpkg toolchain, output directory, shared‐library naming

2. **vcpkg (Microsoft’s C++ package manager)**

    - Installs `pybind11`, optional test frameworks (Catch2/GoogleTest), Doxygen

    - Manifest file: `vcpkg.json`

    - Integrated via `-DCMAKE_TOOLCHAIN_FILE=…/vcpkg/scripts/buildsystems/vcpkg.cmake`

3. **uv (Astral)**

    - Python environment management: virtual‐env creation, inline dependency declarations

    - Script‐level dependencies:`numpy`, `matplotlib`, `pygame`, `pybind11`

    - Python virtual environments

    - Created via `uv venv` or `python -m venv`

    - Dependencies installed via `pip install -r requirements.txt` or `uv pip install …`

### C++ ↔ Python Binding
1. **pybind11**

    - Module definition: `PYBIND11_MODULE(three_body, m)`

    - Class binding: `py::class_<Body>`,`def_readwrite`, `def(py::init<…>)`

    - Function binding: `m.def("step", &step, …)` or custom lambda for in-place updates

2. **Module output**

    - Linux: `three_body.so`

    - Windows: `three_body.pyd`

    - Output directory configured via `LIBRARY_OUTPUT_DIRECTORY`

### Visualization & Interaction
1. **Static plots (Matplotlib)**

    - Agg backend (headless mode)

    - Auto-scaled axes, saved as PNG

    - Optional interactive parameter input (steps `n_steps`, timestep `dt`)

2. **Real‐time window (Pygame)**

    - Renders trajectories (`pygame.draw.lines`) and bodies (`pygame.draw.circle`)

    - Interactive controls:

        - Pause/Resume (Space)

        - Zoom in/out (Up/Down arrows)
        >[!NOTE]  
        >*This function may get some wrong.*

        - Toggle trails (T)

    - Overlay info: velocities (km/s), simulation time (hours), status, hint text

3. **Matplotlib Animation (optional)**

    - `FuncAnimation` for frame‐by‐frame updates on a GUI backend

### Configuration & Data Management
1. **JSON configuration**

    - Structure: list of objects with fields `mass`, `pos/position`, `vel/velocity`, `color`

    - Used for file‐based input in both static and dynamic scripts

2. **Terminal interaction**

    - `input()` for user-defined: number of bodies, masses, positions, velocities, colors, steps, timesteps

### Helper Tools & Scripts
1. Build script (`build.sh`)

    - Automates clean, CMake configure/build, Python venv setup

## Build This Project

>[!NOTE]
>Source configuration may currently only supported to run on Linux. If you want to build it at Windows or other platforms, logical changes to the configuration are required.

- First of all, clone this repository
```bash
git clone https://github.com/virtualguard101/3BodySimulator.git
```

- Run build script
```bash
chmod +x build.sh
./build.sh
```

This will generate a `build` folder in project's root folder, and a `.so` file called `three_body` in `python` folder.

Then you can run the python script according to the `build.sh` output prompts.

## Statements

- This project is for my personal study (at least for now). Please do not use it for purposes other than study and reference, otherwise, the consequences will be borne by yourself!

- Your are welcome put forward suggestions in issue, I would de grateful if it is valuable.
